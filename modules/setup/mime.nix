{
    delib,
    host,
    ...
}:
delib.module {
    name = "setup.mime";

    options = delib.singleEnableOption host.isDesktop;

    home.ifEnabled = {
        xdg.mime.enable = true;
        xdg.mimeApps = {
            enable = true;
            associations.added = {
                "application/json" = ["org.kde.kwrite.desktop" "nvim.desktop"];
                "application/pdf" = ["zen-beta.desktop"];
                "application/x-docbook+xml" = ["org.kde.kwrite.desktop" "nvim.desktop"];
                "application/x-matroska" = ["mpv.desktop"];
                "application/x-yaml" = ["org.kde.kwrite.desktop" "nvim.desktop"];
                "audio/aac" = ["mpv.desktop"];
                "audio/mp4" = ["mpv.desktop"];
                "audio/mpeg" = ["mpv.desktop"];
                "audio/mpegurl" = ["mpv.desktop"];
                "audio/ogg" = ["mpv.desktop"];
                "audio/vnd.rn-realaudio" = ["mpv.desktop"];
                "audio/vorbis" = ["mpv.desktop"];
                "audio/x-flac" = ["mpv.desktop"];
                "audio/x-mp3" = ["mpv.desktop"];
                "audio/x-mpegurl" = ["mpv.desktop"];
                "audio/x-ms-wma" = ["mpv.desktop"];
                "audio/x-musepack" = ["mpv.desktop"];
                "audio/x-oggflac" = ["mpv.desktop"];
                "audio/x-pn-realaudio" = ["mpv.desktop"];
                "audio/x-scpls" = ["mpv.desktop"];
                "audio/x-vorbis" = ["mpv.desktop"];
                "audio/x-vorbis+ogg" = ["mpv.desktop"];
                "audio/x-wav" = ["mpv.desktop"];
                "text/markdown" = ["org.kde.kwrite.desktop" "nvim.desktop"];
                "text/plain" = ["org.kde.kwrite.desktop" "nvim.desktop"];
                "text/x-cmake" = ["org.kde.kwrite.desktop" "nvim.desktop"];
                "video/3gp" = ["mpv.desktop"];
                "video/3gpp" = ["mpv.desktop"];
                "video/3gpp2" = ["mpv.desktop"];
                "video/avi" = ["mpv.desktop"];
                "video/divx" = ["mpv.desktop"];
                "video/dv" = ["mpv.desktop"];
                "video/fli" = ["mpv.desktop"];
                "video/flv" = ["mpv.desktop"];
                "video/mp2t" = ["mpv.desktop"];
                "video/mp4" = ["mpv.desktop"];
                "video/mp4v-es" = ["mpv.desktop"];
                "video/mpeg" = ["mpv.desktop"];
                "video/msvideo" = ["mpv.desktop"];
                "video/ogg" = ["mpv.desktop"];
                "video/quicktime" = ["mpv.desktop"];
                "video/vnd.divx" = ["mpv.desktop"];
                "video/vnd.mpegurl" = ["mpv.desktop"];
                "video/vnd.rn-realvideo" = ["mpv.desktop"];
                "video/webm" = ["mpv.desktop"];
                "video/x-avi" = ["mpv.desktop"];
                "video/x-flv" = ["mpv.desktop"];
                "video/x-m4v" = ["mpv.desktop"];
                "video/x-matroska" = ["mpv.desktop"];
                "video/x-mpeg2" = ["mpv.desktop"];
                "video/x-ms-asf" = ["mpv.desktop"];
                "video/x-ms-wmv" = ["mpv.desktop"];
                "video/x-ms-wmx" = ["mpv.desktop"];
                "video/x-msvideo" = ["mpv.desktop"];
                "video/x-ogm" = ["mpv.desktop"];
                "video/x-ogm+ogg" = ["mpv.desktop"];
                "video/x-theora" = ["mpv.desktop"];
                "video/x-theora+ogg" = ["mpv.desktop"];
                "x-scheme-handler/geo" = ["qwant-maps-geo-handler.desktop"];
                "x-scheme-handler/http" = ["xfce4-web-browser.desktop"];
                "x-scheme-handler/https" = ["xfce4-web-browser.desktop"];
                "x-scheme-handler/tg" = ["org.telegram.desktop.desktop"];
                "x-scheme-handler/tonsite" = ["org.telegram.desktop.desktop"];
            };

            defaultApplications = {
                "application/json" = ["org.kde.kwrite.desktop"];
                "application/pdf" = ["zen-beta.desktop"];
                "application/x-docbook+xml" = ["org.kde.kwrite.desktop"];
                "application/x-matroska" = ["mpv.desktop"];
                "application/x-yaml" = ["org.kde.kwrite.desktop"];
                "audio/aac" = ["mpv.desktop"];
                "audio/mp4" = ["mpv.desktop"];
                "audio/mpeg" = ["mpv.desktop"];
                "audio/mpegurl" = ["mpv.desktop"];
                "audio/ogg" = ["mpv.desktop"];
                "audio/vnd.rn-realaudio" = ["mpv.desktop"];
                "audio/vorbis" = ["mpv.desktop"];
                "audio/x-flac" = ["mpv.desktop"];
                "audio/x-mp3" = ["mpv.desktop"];
                "audio/x-mpegurl" = ["mpv.desktop"];
                "audio/x-ms-wma" = ["mpv.desktop"];
                "audio/x-musepack" = ["mpv.desktop"];
                "audio/x-oggflac" = ["mpv.desktop"];
                "audio/x-pn-realaudio" = ["mpv.desktop"];
                "audio/x-scpls" = ["mpv.desktop"];
                "audio/x-vorbis" = ["mpv.desktop"];
                "audio/x-vorbis+ogg" = ["mpv.desktop"];
                "audio/x-wav" = ["mpv.desktop"];
                "image/jpeg" = ["org.gnome.Loupe.desktop"];
                "image/png" = ["org.gnome.Loupe.desktop"];
                "image/webp" = ["org.gnome.Loupe.desktop"];
                "text/html" = ["zen-beta.desktop"];
                "text/markdown" = ["org.kde.kwrite.desktop"];
                "text/plain" = ["org.kde.kwrite.desktop"];
                "text/x-cmake" = ["org.kde.kwrite.desktop"];
                "video/3gp" = ["mpv.desktop"];
                "video/3gpp" = ["mpv.desktop"];
                "video/3gpp2" = ["mpv.desktop"];
                "video/avi" = ["mpv.desktop"];
                "video/divx" = ["mpv.desktop"];
                "video/dv" = ["mpv.desktop"];
                "video/fli" = ["mpv.desktop"];
                "video/flv" = ["mpv.desktop"];
                "video/mp2t" = ["mpv.desktop"];
                "video/mp4" = ["mpv.desktop"];
                "video/mp4v-es" = ["mpv.desktop"];
                "video/mpeg" = ["mpv.desktop"];
                "video/msvideo" = ["mpv.desktop"];
                "video/ogg" = ["mpv.desktop"];
                "video/quicktime" = ["mpv.desktop"];
                "video/vnd.divx" = ["mpv.desktop"];
                "video/vnd.mpegurl" = ["mpv.desktop"];
                "video/vnd.rn-realvideo" = ["mpv.desktop"];
                "video/webm" = ["mpv.desktop"];
                "video/x-avi" = ["mpv.desktop"];
                "video/x-flv" = ["mpv.desktop"];
                "video/x-m4v" = ["mpv.desktop"];
                "video/x-matroska" = ["mpv.desktop"];
                "video/x-mpeg2" = ["mpv.desktop"];
                "video/x-ms-asf" = ["mpv.desktop"];
                "video/x-ms-wmv" = ["mpv.desktop"];
                "video/x-ms-wmx" = ["mpv.desktop"];
                "video/x-msvideo" = ["mpv.desktop"];
                "video/x-ogm" = ["mpv.desktop"];
                "video/x-ogm+ogg" = ["mpv.desktop"];
                "video/x-theora" = ["mpv.desktop"];
                "video/x-theora+ogg" = ["mpv.desktop"];
                "x-scheme-handler/about" = ["zen-beta.desktop"];
                "x-scheme-handler/geo" = ["qwant-maps-geo-handler.desktop"];
                "x-scheme-handler/http" = ["zen-beta.desktop"];
                "x-scheme-handler/https" = ["zen-beta.desktop"];
                "x-scheme-handler/migu" = ["appimagekit_fb7b0853152e16b22effb25dd6497a54-Migu.desktop"];
                "x-scheme-handler/tg" = ["org.telegram.desktop.desktop"];
                "x-scheme-handler/tonsite" = ["org.telegram.desktop.desktop"];
                "x-scheme-handler/unknown" = ["zen-beta.desktop"];
                "inode/directory" = ["org.kde.dolphin.desktop"];
                "x-scheme-handler/discord" = ["equibop.desktop"];
                "x-scheme-handler/postman" = ["Postman.desktop"];
            };
        };
    };
}
